{"mappings":"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","sources":["src/index.js"],"sourcesContent":["import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport Notiflix from 'notiflix';\nimport axios from 'axios';\nimport scrollBy from './scrollBy.js';\n\n// ======================================\n\nconst API_KEY = '33528220-6f12bec756615243821cbd5de';\nconst BASE_URL = 'https://pixabay.com/api';\nlet page = 1;\nlet per_page = 40;\nlet searchQuery = '';\nlet totalHits = 0;\nlet lightbox = '';\n\nasync function searchImage() {\n  const response = await axios.get(\n    `${BASE_URL}/?key=${API_KEY}&q=${searchQuery}&image_type=photo&per_page=${per_page}&page=${page}&orientation=horizontal&safesearch=true`\n  );\n  totalHits = response.data.totalHits;\n  nextPage();\n  return response.data.hits;\n}\n\n// =========================================\n\nconst searchForm = document.querySelector('#search-form');\nconst gallery = document.querySelector('.gallery');\nconst loadMoreBtn = document.querySelector('.load-more');\nconst submitBtn = document.querySelector('.submit');\nconst input = document.querySelector('#search-form > input');\n\nsearchForm.addEventListener('submit', onSearch);\nloadMoreBtn.addEventListener('click', fetchImages);\nsearchForm.addEventListener('input', onSabmitBtn, ofSabmitBtn);\ninput.addEventListener('input', invalidInput);\n\nfunction invalidInput(e) {\n  if (e.data === null) {\n    submitBtn.disabled = true;\n  }\n  return;\n}\n\nfunction onSabmitBtn(e) {\n  // console.log(e.currentTarget.elements.searchQuery.value);\n  if (e.currentTarget.elements.searchQuery.value.trim().length !== 0) {\n    submitBtn.disabled = false;\n  }\n}\n\nfunction ofSabmitBtn() {\n  submitBtn.disabled = true;\n}\n\nasync function onSearch(e) {\n  e.preventDefault();\n\n  const form = e.currentTarget;\n  const value = form.elements.searchQuery.value.trim();\n  searchQuery = value;\n\n  onSabmitBtn(e);\n  invalidInput(e);\n  resetPage();\n  clearGallery();\n\n  await fetchImages().finally(() => form.reset());\n  ofSabmitBtn();\n}\n\nasync function fetchImages() {\n  try {\n    loadMoreBtnDisabled();\n\n    const images = await searchImage();\n    const markup = await images.reduce(\n      (markup, image) => createMarkup(image) + markup,\n      ''\n    );\n\n    appendImagesToGallery(markup);\n    lightbox.refresh();\n\n    if (totalHits > per_page && page - 1 !== 1) {\n      scrollBy();\n    }\n\n    loadMoreBtn.classList.remove('is-hidden');\n    loadMoreBtnEnabled();\n\n    if (totalHits === 0) {\n      loadMoreBtn.classList.add('is-hidden');\n      Notiflix.Notify.failure(\n        'Sorry, there are no images matching your search query. Please try again.'\n      );\n    } else if (totalHits > 0 && page - 1 === 1) {\n      totalImages(totalHits);\n      galleryEndInfo();\n    } else galleryEndInfo();\n  } catch (err) {\n    return console.error(err);\n  }\n}\n\nfunction appendImagesToGallery(markup) {\n  gallery.insertAdjacentHTML('beforeend', markup);\n  lightBox();\n}\n\nfunction clearGallery() {\n  gallery.innerHTML = '';\n}\n\nfunction createMarkup({\n  largeImageURL,\n  webformatURL,\n  tags,\n  likes,\n  views,\n  comments,\n  downloads,\n}) {\n  return `\n  <a href=\"${largeImageURL}\">\n  <div class=\"photo-card\">\n  <img src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\" />\n  <div class=\"info\">\n    <p class=\"info-item\">\n      <b>Likes: </b>${likes}\n    </p>\n    <p class=\"info-item\">\n      <b>Views: </b>${views}\n    </p>\n    <p class=\"info-item\">\n      <b>Comments: </b>${comments}\n    </p>\n    <p class=\"info-item\">\n      <b>Downloads: </b>${downloads}\n    </p>\n  </div>\n</div></a>\n  `;\n}\n\nfunction nextPage() {\n  page += 1;\n}\n\nfunction resetPage() {\n  page = 1;\n}\n\nfunction lightBox() {\n  lightbox = new SimpleLightbox('.gallery a', {\n    captionsData: 'alt',\n    captionDelay: 250,\n  });\n}\n\nfunction totalImages(totalHits) {\n  Notiflix.Notify.success(`Hooray! We found ${totalHits} images.`);\n}\n\nfunction loadMoreBtnDisabled() {\n  loadMoreBtn.disabled = true;\n  loadMoreBtn.textContent = 'Loading...';\n}\n\nfunction loadMoreBtnEnabled() {\n  loadMoreBtn.disabled = false;\n  loadMoreBtn.textContent = 'Load more';\n}\n\nfunction galleryEndInfo() {\n  if (totalHits / per_page < page - 1) {\n    loadMoreBtn.classList.add('is-hidden');\n    Notiflix.Notify.success(\n      \"We're sorry, but you've reached the end of search results.\"\n    );\n  }\n}\n"],"names":["$bpxeT","parcelRequire","$b8f9b7833fa37166$var$API_KEY","$b8f9b7833fa37166$var$BASE_URL","$b8f9b7833fa37166$var$page","$b8f9b7833fa37166$var$searchQuery","$b8f9b7833fa37166$var$totalHits","$b8f9b7833fa37166$var$lightbox","$b8f9b7833fa37166$var$searchImage","$b8f9b7833fa37166$var$_searchImage","apply","this","arguments","$parcel$interopDefault","$2TvXO","mark","_callee","response","$dIxxU","default","get","concat","_ctx","sent","data","totalHits","$b8f9b7833fa37166$var$nextPage","hits","$b8f9b7833fa37166$var$searchForm","document","querySelector","$b8f9b7833fa37166$var$gallery","$b8f9b7833fa37166$var$loadMoreBtn","$b8f9b7833fa37166$var$submitBtn","$b8f9b7833fa37166$var$input","$b8f9b7833fa37166$var$invalidInput","e","disabled","$b8f9b7833fa37166$var$onSabmitBtn","currentTarget","elements","searchQuery","value","trim","length","$b8f9b7833fa37166$var$ofSabmitBtn","$b8f9b7833fa37166$var$_onSearch","form","preventDefault","$b8f9b7833fa37166$var$resetPage","$b8f9b7833fa37166$var$clearGallery","$b8f9b7833fa37166$var$fetchImages","finally","reset","$b8f9b7833fa37166$var$_fetchImages","images","$b8f9b7833fa37166$var$loadMoreBtnDisabled","reduce","markup","image","$b8f9b7833fa37166$var$createMarkup","$b8f9b7833fa37166$var$appendImagesToGallery","refresh","$707g3","classList","remove","$b8f9b7833fa37166$var$loadMoreBtnEnabled","add","$6JpON","Notify","failure","$b8f9b7833fa37166$var$totalImages","$b8f9b7833fa37166$var$galleryEndInfo","console","error","t0","insertAdjacentHTML","$5IjG7","captionsData","captionDelay","innerHTML","param","largeImageURL","webformatURL","tags","likes","views","comments","downloads","totalHits1","success","textContent","addEventListener"],"version":3,"file":"load-more.d7699f42.js.map"}